<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Fishing Game</title>
    <style>
        body {
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #87CEEB; /* Sky blue background */
            font-family: Arial, sans-serif;
        }
        #game-container {
            position: relative;
        }
        canvas {
            border: 1px solid #000;
            background-color: #1E90FF; /* Water blue */
        }
        #instructions {
            position: absolute;
            top: 10px;
            left: 10px;
            color: white;
            background: rgba(0, 0, 0, 0.5);
            padding: 10px;
            border-radius: 5px;
        }
        #score {
            position: absolute;
            top: 10px;
            right: 10px;
            color: white;
            background: rgba(0, 0, 0, 0.5);
            padding: 10px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <canvas id="gameCanvas" width="800" height="600"></canvas>
        <div id="instructions">
            <p>Click to cast your line.</p>
            <p>When the bobber shakes, click quickly to reel in!</p>
        </div>
        <div id="score">Score: 0</div>
    </div>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('score');

        // Game variables
        let score = 0;
        let isCasting = false;
        let isBiting = false;
        let biteTimer = 0;
        let reactionTime = 0;
        let hookX = canvas.width / 2;
        let hookY = 0;
        let bobberY = 0;
        let fish = [];
        let lineLength = 0;

        // Fish class
        class Fish {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * (canvas.height / 2) + canvas.height / 2;
                this.speed = Math.random() * 2 + 1;
                this.direction = Math.random() > 0.5 ? 1 : -1;
                this.size = Math.random() * 20 + 10;
            }

            update() {
                this.x += this.speed * this.direction;
                if (this.x < 0 || this.x > canvas.width) {
                    this.direction *= -1;
                }
            }

            draw() {
                ctx.fillStyle = '#FFD700'; // Gold fish color
                ctx.beginPath();
                ctx.ellipse(this.x, this.y, this.size, this.size / 2, 0, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        // Create initial fish
        for (let i = 0; i < 5; i++) {
            fish.push(new Fish());
        }

        // Game loop
        function gameLoop() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw water surface
            ctx.fillStyle = '#4682B4';
            ctx.fillRect(0, canvas.height / 2, canvas.width, canvas.height / 2);

            // Draw fishing rod (simple line from top)
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(canvas.width / 2, 0);
            ctx.lineTo(canvas.width / 2, 50);
            ctx.stroke();

            // Draw fishing line and bobber if casting
            if (isCasting) {
                ctx.strokeStyle = '#000';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(canvas.width / 2, 50);
                ctx.lineTo(hookX, bobberY);
                ctx.stroke();

                // Bobber
                ctx.fillStyle = '#FF0000';
                ctx.beginPath();
                ctx.arc(hookX, bobberY, 5, 0, Math.PI * 2);
                ctx.fill();

                // Lower the hook initially
                if (lineLength < canvas.height * 0.75) {
                    lineLength += 2;
                    bobberY = 50 + lineLength;
                } else {
                    // Check for bite
                    if (!isBiting && Math.random() < 0.01) {
                        isBiting = true;
                        biteTimer = Date.now();
                    }

                    if (isBiting) {
                        // Shake bobber
                        hookX = canvas.width / 2 + (Math.random() - 0.5) * 10;
                        reactionTime = Date.now() - biteTimer;
                        if (reactionTime > 3000) { // Missed the bite
                            resetCast();
                        }
                    }
                }
            }

            // Update and draw fish
            fish.forEach(f => {
                f.update();
                f.draw();
            });

            // Check if hook catches a fish
            if (isBiting && isCasting) {
                fish = fish.filter(f => {
                    if (Math.abs(f.x - hookX) < 20 && Math.abs(f.y - bobberY) < 20) {
                        score += 1;
                        scoreElement.textContent = `Score: ${score}`;
                        return false; // Remove caught fish
                    }
                    return true;
                });
            }

            requestAnimationFrame(gameLoop);
        }

        // Reset after catch or miss
        function resetCast() {
            isCasting = false;
            isBiting = false;
            lineLength = 0;
            bobberY = 0;
            hookX = canvas.width / 2;
            // Add new fish if needed
            if (fish.length < 5) {
                fish.push(new Fish());
            }
        }

        // Handle clicks
        canvas.addEventListener('click', () => {
            if (!isCasting) {
                isCasting = true;
            } else if (isBiting) {
                // Reeling in
                if (reactionTime < 2000) { // Successful catch if quick enough
                    // Fish is caught in the filter above
                }
                resetCast();
            }
        });

        gameLoop();
    </script>
</body>
</html>
